<?xml version="1.0" encoding="UTF-8"?>
<svg width="500" height="570" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="7" markerHeight="5" 
     refX="6" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#1976d2" />
    </marker>
    <marker id="dashedArrow" markerWidth="7" markerHeight="5" 
     refX="6" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#999" />
    </marker>
    <marker id="bidirectionalArrow" markerWidth="5" markerHeight="3" 
     refX="4" refY="1.5" orient="auto">
      <polygon points="0 0, 5 1.5, 0 3" fill="#ff6b35" />
    </marker>
  </defs>
  
  
  <!-- navctl local process container -->
  <rect x="50" y="20" width="400" height="340" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="10"/>
  <text x="250" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1976d2">navctl local process</text>
  
  <!-- UI component -->
  <rect x="200" y="70" width="100" height="60" fill="#bbdefb" stroke="#1565c0" stroke-width="1" rx="5"/>
  <text x="250" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0d47a1">Web UI</text>
  <text x="250" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1565c0">React App :3000</text>
  
  <!-- Manager component -->
  <rect x="185" y="170" width="130" height="60" fill="#bbdefb" stroke="#1565c0" stroke-width="1" rx="5"/>
  <text x="250" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0d47a1">Manager</text>
  <text x="250" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1565c0">gRPC :8080</text>
  <text x="250" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1565c0">HTTP :8081</text>
  
  <!-- Edge components -->
  <rect x="125" y="270" width="100" height="60" fill="#bbdefb" stroke="#1565c0" stroke-width="1" rx="5"/>
  <text x="175" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0d47a1">Edge 1</text>
  <text x="175" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Cluster A Service</text>
  
  <rect x="275" y="270" width="100" height="60" fill="#bbdefb" stroke="#1565c0" stroke-width="1" rx="5"/>
  <text x="325" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0d47a1">Edge 2</text>
  <text x="325" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Cluster B Service</text>
  
  <!-- Cluster A container -->
  <rect x="60" y="400" width="180" height="85" fill="#ede7f6" stroke="#9c27b0" stroke-width="2" rx="5"/>
  <text x="150" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6a1b9a">Cluster A</text>
  
  <!-- Kubernetes API A -->
  <rect x="75" y="420" width="70" height="35" fill="#e1bee7" stroke="#8e24aa" stroke-width="1" rx="3"/>
  <text x="110" y="435" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#4a148c">Kubernetes</text>
  <text x="110" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#4a148c">API Server</text>
  
  <!-- Envoy Proxy A -->
  <rect x="155" y="420" width="70" height="35" fill="#e1bee7" stroke="#8e24aa" stroke-width="1" rx="3"/>
  <text x="190" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#4a148c">Envoy Proxy</text>
  
  <!-- Cluster B container -->
  <rect x="260" y="400" width="180" height="85" fill="#ede7f6" stroke="#9c27b0" stroke-width="2" rx="5"/>
  <text x="350" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6a1b9a">Cluster B</text>
  
  <!-- Kubernetes API B -->
  <rect x="275" y="420" width="70" height="35" fill="#e1bee7" stroke="#8e24aa" stroke-width="1" rx="3"/>
  <text x="310" y="435" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#4a148c">Kubernetes</text>
  <text x="310" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#4a148c">API Server</text>
  
  <!-- Envoy Proxy B -->
  <rect x="355" y="420" width="70" height="35" fill="#e1bee7" stroke="#8e24aa" stroke-width="1" rx="3"/>
  <text x="390" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#4a148c">Envoy Proxy</text>
  
  
  <!-- Internal connections -->
  <!-- UI -> Manager -->
  <line x1="250" y1="130" x2="250" y2="170" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Manager <-> Edge 1 (Bidirectional Stream) -->
  <line x1="175" y1="270" x2="215" y2="230" stroke="#ff6b35" stroke-width="3" stroke-dasharray="8,4" marker-end="url(#bidirectionalArrow)"/>
  
  <!-- Manager <-> Edge 2 (Bidirectional Stream) -->
  <line x1="325" y1="270" x2="285" y2="230" stroke="#ff6b35" stroke-width="3" stroke-dasharray="8,4" marker-end="url(#bidirectionalArrow)"/>
  
  <!-- External connections (dashed) -->
  <!-- Edge 1 to Cluster A -->
  <line x1="165" y1="330" x2="110" y2="420" stroke="#999" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#dashedArrow)"/>
  <line x1="185" y1="330" x2="190" y2="420" stroke="#999" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#dashedArrow)"/>
  
  <!-- Edge 2 to Cluster B -->
  <line x1="315" y1="330" x2="310" y2="420" stroke="#999" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#dashedArrow)"/>
  <line x1="335" y1="330" x2="390" y2="420" stroke="#999" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#dashedArrow)"/>
  
  <!-- Labels for connections -->
  
  <!-- Key -->
  <rect x="50" y="500" width="400" height="60" fill="white" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="60" y="515" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">Legend:</text>
  <line x1="60" y1="525" x2="85" y2="525" stroke="#ff6b35" stroke-width="3" stroke-dasharray="8,4"/>
  <text x="90" y="530" font-family="Arial, sans-serif" font-size="9" fill="#333">Bidirectional gRPC streams</text>
  <line x1="60" y1="540" x2="85" y2="540" stroke="#1976d2" stroke-width="2"/>
  <text x="90" y="545" font-family="Arial, sans-serif" font-size="9" fill="#333">Internal HTTP connections</text>
  <line x1="250" y1="540" x2="275" y2="540" stroke="#999" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="280" y="545" font-family="Arial, sans-serif" font-size="9" fill="#333">External connections</text>
</svg>